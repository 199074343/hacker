# GDTech第八届骇客大赛 - 产品验收文档

**项目名称**：GDTech第八届骇客大赛官网
**验收日期**：2025-10-13
**版本号**：v1.0.0
**提交人**：开发团队

---

## 一、访问地址

### 开发环境

| 服务 | 地址 | 状态 |
|------|------|------|
| 前端网站 | http://localhost:8000 | 🟢 运行中 |
| 后端API | http://localhost:8080/api | 🟢 运行中 |
| API健康检查 | http://localhost:8080/api/hackathon/health | 🟢 正常 |

### 生产环境（待部署）
- 前端：待配置域名
- 后端：待配置域名

---

## 二、测试账号信息

### 投资人测试账号

系统中已配置以下测试账号，可用于登录和投资功能验收：

| 账号 | 密码 | 姓名 | 职务 | 初始额度 |
|------|------|------|------|----------|
| 1001 | abc123 | 张明 | 技术总监 | 100万元 |
| 1002 | def456 | 李华 | 产品经理 | 150万元 |
| 1003 | ghi789 | 王芳 | 研发经理 | 120万元 |
| 1004 | jkl012 | 刘强 | CTO | 200万元 |
| 1005 | mno345 | 陈静 | 架构师 | 80万元 |

**登录步骤：**
1. 访问前端网站 http://localhost:8000
2. 点击右上角"投资人登录"按钮
3. 输入账号（4位数字）和密码（6位数字+小写字母）
4. 登录成功后可进行投资操作

---

## 三、飞书多维表格配置

### 飞书应用信息

| 配置项 | 值 |
|--------|-----|
| App ID | cli_a862c494a9431013 |
| App Secret | tUw7iGj2MKCDVXyGsqJWdh7iLuhqhPc4 |
| 多维表格App Token | VZ77bJ9MvalDxqscf0Bcfh0Tnjp |

### 飞书表格ID

| 表格名称 | Table ID | 记录数 | 说明 |
|----------|----------|--------|------|
| 参赛作品表 | tblGAbkdJKqTOlEw | 20条 | 存储项目信息、UV数据 |
| 投资人表 | tblDp18p0G4xcADk | 5条 | 存储投资人账号信息 |
| 投资记录表 | tblh9DMhfC4dQHMJ | 10条 | 存储所有投资记录 |
| 配置表 | tbl43OV7SBtzFzw1 | 10条 | 存储比赛阶段等配置 |

**访问地址**：
- 飞书多维表格：https://open.feishu.cn/open-apis/bitable/v1/apps/VZ77bJ9MvalDxqscf0Bcfh0Tnjp

**权限说明**：
- 需要有多维表格的读写权限
- 应用需要申请以下权限范围：
  - `bitable:app`（多维表格应用权限）
  - `bitable:app:readonly`（多维表格只读权限）

---

## 四、百度统计配置

### 账号信息

系统支持多个百度统计账号，用于管理超过60个站点：

#### Account 1（账号1）
| 配置项 | 值 |
|--------|-----|
| Client ID (API Key) | pSPZrp0fs3x02wvG0V8WnFByH0j3TekZ |
| Client Secret (Secret Key) | HiQPA3MFKp6ayVq60SnYu4QOaDfEaLix |
| Token有效期 | 30天（自动刷新） |
| 管理站点数 | 最多60个 |

#### Account 2（账号2）
| 配置项 | 值 |
|--------|-----|
| Client ID (API Key) | 9WdFRWt8Db2aGZVPcCVXBgIYmOQUXTEH |
| Client Secret (Secret Key) | tRiVxGdREeQbowK8VUKwA7KLrkZVmP3V |
| Token有效期 | 30天（自动刷新） |
| 管理站点数 | 最多60个 |

### UV数据同步

- **同步间隔**：10分钟
- **数据范围**：最近30天累计UV
- **自动化**：系统启动后自动同步，无需手动操作

**验证方式**：
查看后端日志，应该能看到：
```
账号 account1 Token获取成功，过期时间: 2592000 秒后
账号 account2 Token获取成功，过期时间: 2592000 秒后
```

---

## 五、核心功能验收清单

### 5.1 基本信息展示

| 功能点 | 验收标准 | 状态 |
|--------|----------|------|
| 网站标题 | 显示"GDTech第八届骇客大赛" | ✅ 通过 |
| 背景图 | 显示背景图片，可点击跳转至公众号 | ✅ 通过 |
| 主办方信息 | 页脚显示"高顿集团科技研发中心" | ✅ 通过 |
| 赞助方信息 | 页脚显示"字节跳动火山引擎" | ✅ 通过 |

### 5.2 比赛阶段管理

| 阶段 | 时间范围 | 排名规则 | 投资功能 | 状态 |
|------|----------|----------|----------|------|
| 海选期 | 10/24 24:00 - 11/7 12:00 | UV排名 | 不可投资 | ✅ 通过 |
| 锁定期 | 11/7 12:00 - 11/14 0:00 | UV排名，晋级区分离 | 不可投资 | ✅ 通过 |
| 投资期 | 11/14 0:00 - 18:00 | 加权排名（UV*40%+投资*60%） | 可投资 | ✅ 通过 |
| 结束期 | 11/14 18:00后 | 锁定排名 | 不可投资 | ✅ 通过 |

**当前阶段**：投资期（用于演示）

### 5.3 参赛作品展示

| 功能点 | 验收标准 | 状态 |
|--------|----------|------|
| 项目配图 | 显示项目配图，悬停放大效果 | ✅ 通过 |
| 项目名称 | 清晰显示项目名称 | ✅ 通过 |
| 一句话描述 | 显示项目简介 | ✅ 通过 |
| 项目网址 | 显示并可点击访问 | ✅ 通过 |
| 队伍名称 | 显示队伍名称和编号 | ✅ 通过 |
| 队伍介绍页 | 点击队伍名跳转到团队介绍 | ✅ 通过 |
| 累计UV | 显示实时UV数据 | ✅ 通过 |
| 投资总额 | 显示已获得的投资金额 | ✅ 通过 |
| 排名徽章 | 显示当前排名（前3名金色） | ✅ 通过 |

### 5.4 晋级区展示

| 功能点 | 验收标准 | 状态 |
|--------|----------|------|
| 晋级区标识 | 金色背景区分晋级区 | ✅ 通过 |
| 晋级区标题 | 显示"晋级区（前15名）" | ✅ 通过 |
| 非晋级区标题 | 显示"参赛作品" | ✅ 通过 |
| 分区显示 | 锁定期/投资期/结束期明显区分 | ✅ 通过 |

### 5.5 投资功能

| 功能点 | 验收标准 | 状态 |
|--------|----------|------|
| 投资按钮 | 仅晋级区作品显示投资按钮 | ✅ 通过 |
| 登录校验 | 未登录点击投资提示登录 | ✅ 通过 |
| 阶段校验 | 非投资期点击投资提示阶段限制 | ✅ 通过 |
| 金额输入 | 只能输入正整数，单位万元 | ✅ 通过 |
| 额度校验 | 超出剩余额度时提示错误 | ✅ 通过 |
| 投资确认 | 显示项目信息和剩余额度 | ✅ 通过 |
| 投资记录 | 投资后立即更新投资明细 | ✅ 通过 |
| 不可撤回 | 投资成功后无法撤回 | ✅ 通过 |

### 5.6 投资人页面

| 功能点 | 验收标准 | 状态 |
|--------|----------|------|
| 登录表单 | 4位数字账号 + 6位数字字母密码 | ✅ 通过 |
| 登录验证 | 账号密码错误提示 | ✅ 通过 |
| 头像显示 | 登录后右上角显示头像+姓名 | ✅ 通过 |
| 个人信息 | 显示姓名、职务、头像 | ✅ 通过 |
| 额度信息 | 显示初始额度、剩余额度 | ✅ 通过 |
| 投资历史 | 显示所有投资记录 | ✅ 通过 |
| 投资时间 | 显示年月日时分秒 | ✅ 通过 |
| 投资项目 | 显示项目名、队伍名、队伍编号 | ✅ 通过 |
| 投资金额 | 显示投资金额（万元） | ✅ 通过 |

### 5.7 排名算法

| 阶段 | 算法 | 验收结果 | 状态 |
|------|------|----------|------|
| 海选期 | UV排名，UV相同按队伍编号排序 | 测试通过 | ✅ 通过 |
| 锁定期 | UV排名，分晋级区/非晋级区 | 测试通过 | ✅ 通过 |
| 投资期 | UV排名分数*40% + 投资额排名分数*60% | 测试通过 | ✅ 通过 |
| 结束期 | 与投资期相同 | 测试通过 | ✅ 通过 |

**投资期算法详解**：
```
步骤1：按UV排序，计算UV排名分数
  UV排名分数 = (总队伍数+1-UV排名) / 总队伍数 * 100

步骤2：按投资额排序，计算投资额排名分数
  投资额排名分数 = (总队伍数+1-投资额排名) / 总队伍数 * 100

步骤3：计算加权分数
  加权分数 = UV排名分数 * 40% + 投资额排名分数 * 60%

步骤4：按加权分数排序，得到最终排名
  分数相同时按投资额排序
  投资额也相同时按队伍编号排序
```

### 5.8 数据统计

| 功能点 | 验收标准 | 状态 |
|--------|----------|------|
| UV数据展示 | 显示累计UV数 | ✅ 通过 |
| UV自动同步 | 每10分钟从百度统计自动拉取 | ✅ 通过 |
| 投资额统计 | 实时统计项目获得投资总额 | ✅ 通过 |
| 投资明细 | 显示所有投资人头像和金额 | ✅ 通过 |
| 投资人卡片 | 悬停头像显示投资人详情 | ✅ 通过 |

### 5.9 UI风格

| 要求 | 验收标准 | 状态 |
|------|----------|------|
| 深色调 | 整体深色背景 | ✅ 通过 |
| 科技感 | 玻璃态效果 + 渐变色 | ✅ 通过 |
| 响应式 | 移动端自适应 | ✅ 通过 |
| 动画效果 | 悬停、点击有过渡动画 | ✅ 通过 |

---

## 六、API接口文档

### 基础信息
- **Base URL**：http://localhost:8080/api/hackathon
- **Content-Type**：application/json
- **字符编码**：UTF-8

### 6.1 获取当前阶段

**接口**：`GET /stage`

**响应示例**：
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "code": "investment",
    "name": "投资期",
    "canInvest": true,
    "rule": "本阶段,投资人可将虚拟投资金投给晋级的15个作品...",
    "time": "11月14日0:00 - 18:00"
  }
}
```

### 6.2 获取项目列表

**接口**：`GET /projects`

**响应示例**：
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 15,
      "name": "思维导图协作平台",
      "description": "实时多人协作思维导图",
      "url": "https://project15.example.com",
      "image": "https://picsum.photos/400/300?random=15",
      "teamName": "思维协作队",
      "teamNumber": "015",
      "teamUrl": "https://team15.example.com",
      "baiduSiteId": "10015",
      "uv": 20100,
      "investment": 45,
      "investmentRecords": [
        {"name": "张明", "amount": 20},
        {"name": "王芳", "amount": 25}
      ],
      "enabled": true,
      "rank": 1,
      "qualified": true,
      "weightedScore": 100.0
    }
  ]
}
```

### 6.3 投资人登录

**接口**：`POST /login`

**请求体**：
```json
{
  "username": "1001",
  "password": "abc123"
}
```

**响应示例**：
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "username": "1001",
    "name": "张明",
    "title": "技术总监",
    "avatar": "https://avatar.example.com/zhangming.jpg",
    "initialAmount": 100,
    "remainingAmount": 80,
    "investedAmount": 20,
    "investmentHistory": [
      {
        "projectName": "思维导图协作平台",
        "amount": 20,
        "time": "2025-10-13 15:30:00"
      }
    ]
  }
}
```

### 6.4 执行投资

**接口**：`POST /invest`

**请求体**：
```json
{
  "investorUsername": "1001",
  "projectId": 15,
  "amount": 20
}
```

**响应示例**：
```json
{
  "code": 200,
  "message": "投资成功"
}
```

### 6.5 健康检查

**接口**：`GET /health`

**响应示例**：
```json
{
  "code": 200,
  "message": "success",
  "data": "GDTech Hackathon API is running"
}
```

---

## 七、测试场景

### 场景1：游客浏览项目列表

1. 访问 http://localhost:8000
2. 查看比赛阶段说明（应显示当前为"投资期"）
3. 查看晋级区项目列表（前15名，金色背景）
4. 查看非晋级区项目列表
5. 点击项目的"访问"按钮，跳转到项目网址
6. 点击队伍名称，跳转到团队介绍页

**预期结果**：所有链接正常跳转，数据正确显示

### 场景2：投资人登录并投资

1. 点击右上角"投资人登录"按钮
2. 输入账号：1001，密码：abc123
3. 点击登录
4. 登录成功后，右上角显示头像和"张明"
5. 点击头像进入投资人页面
6. 查看个人信息：初始额度100万，剩余额度显示
7. 返回首页，找到晋级区的某个项目
8. 点击"投资"按钮
9. 输入投资金额：20（万元）
10. 点击"确认投资"
11. 投资成功后，查看项目投资明细（应显示投资人头像）
12. 再次进入投资人页面，查看投资历史

**预期结果**：
- 登录成功
- 投资成功
- 剩余额度减少20万
- 项目投资总额增加20万
- 投资历史中新增一条记录
- 项目排名可能发生变化

### 场景3：投资失败场景

**3.1 未登录投资**
1. 不登录，直接点击"投资"按钮
2. 预期：提示"请先登录"

**3.2 非投资期投资**
1. 修改飞书配置表，将当前阶段改为"selection"
2. 重启后端服务
3. 登录后点击"投资"按钮
4. 预期：提示"当前阶段不可投资，详细请见大赛规则"

**3.3 额度不足**
1. 使用账号1005登录（初始额度80万）
2. 尝试投资100万
3. 预期：提示"投资金额超过剩余额度"

**3.4 投资非晋级项目**
1. 尝试投资排名16-20的项目
2. 预期：这些项目没有投资按钮

### 场景4：排名算法验证

1. 查看投资期的项目排名
2. 记录前3名项目的UV和投资额
3. 验证加权分数计算是否正确：
   ```
   例如：
   项目A：UV 20100（排名1），投资45万（排名1）
   UV分数 = (20+1-1)/20*100 = 100
   投资分数 = (20+1-1)/20*100 = 100
   加权分数 = 100*0.4 + 100*0.6 = 100
   ```

**预期结果**：排名与加权分数完全对应

---

## 八、数据管理

### 飞书表格结构

#### 参赛作品表（tblGAbkdJKqTOlEw）

| 字段名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| 项目ID | 数字 | 唯一标识 | 1 |
| 项目名称 | 文本 | 项目名称 | "智能作业批改系统" |
| 一句话描述 | 文本 | 项目简介 | "AI驱动的自动作业批改" |
| 项目网址 | URL | 项目链接 | "https://project1.example.com" |
| 项目配图URL | URL | 配图链接 | "https://picsum.photos/400/300?random=1" |
| 队伍名称 | 文本 | 团队名 | "AI创新队" |
| 队伍编号 | 文本 | 编号 | "001" |
| 团队介绍页URL | URL | 团队链接 | "https://team1.example.com" |
| 百度统计账号 | 文本 | 账号标识 | "account1" |
| 百度统计SiteID | 文本 | 站点ID | "10001" |
| 累计UV | 数字 | UV数据 | 12500 |
| 是否启用 | 复选框 | 启用状态 | true |

#### 投资人表（tblDp18p0G4xcADk）

| 字段名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| 投资人ID | 数字 | 唯一标识 | 1 |
| 账号 | 文本 | 登录账号（4位数字） | "1001" |
| 初始密码 | 文本 | 登录密码（6位数字+字母） | "abc123" |
| 姓名 | 文本 | 投资人姓名 | "张明" |
| 职务 | 文本 | 职位 | "技术总监" |
| 头像URL | URL | 头像链接 | "https://avatar.example.com/zhangming.jpg" |
| 初始额度 | 数字 | 初始投资额（万元） | 100 |
| 是否启用 | 复选框 | 启用状态 | true |

#### 投资记录表（tblh9DMhfC4dQHMJ）

| 字段名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| 投资人账号 | 文本 | 投资人账号 | "1001" |
| 项目ID | 数字 | 项目ID | 15 |
| 投资金额 | 数字 | 投资额（万元） | 20 |
| 投资时间 | 数字 | Unix时间戳（毫秒） | 1697208600000 |
| 投资人姓名 | 文本 | 投资人姓名 | "张明" |
| 项目名称 | 文本 | 项目名称 | "思维导图协作平台" |

#### 配置表（tbl43OV7SBtzFzw1）

| 字段名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| 配置项 | 文本 | 配置键 | "current_stage" |
| 配置值 | 文本 | 配置值 | "investment" |
| 说明 | 文本 | 配置说明 | "当前比赛阶段" |

**当前阶段配置值**：
- `selection` - 海选期
- `lock` - 锁定期
- `investment` - 投资期
- `ended` - 结束期

---

## 九、常见问题

### Q1: 如何修改当前比赛阶段？
**A**: 修改飞书配置表中 `current_stage` 的配置值，然后刷新前端页面。

### Q2: 如何添加新的投资人？
**A**: 在飞书投资人表中添加新记录，填写账号、密码、姓名、职务、头像URL、初始额度。

### Q3: 如何重置投资数据？
**A**: 删除飞书投资记录表中的所有记录，重启后端服务。

### Q4: UV数据如何更新？
**A**: UV数据每10分钟自动从百度统计API同步一次，也可以直接在飞书表格中修改"累计UV"字段。

### Q5: 如何查看后端日志？
**A**: 后端日志输出在控制台，可以查看启动日志、API调用日志、UV同步日志等。

---

## 十、验收签字

### 开发团队确认

- [ ] 所有功能已开发完成
- [ ] 所有测试场景已验证通过
- [ ] 文档已完整提供
- [ ] 代码已提交Git仓库

**签字**：________________
**日期**：2025-10-13

### 产品经理确认

- [ ] 功能符合需求文档
- [ ] UI设计符合要求
- [ ] 数据准确性验证通过
- [ ] 账号信息已收到

**签字**：________________
**日期**：________________

---

## 十一、附件清单

1. **REQUIREMENTS_CHECK.md** - 需求检查报告
2. **DEPLOYMENT_STATUS.md** - 部署状态报告
3. **BAIDU_TONGJI_SETUP.md** - 百度统计配置指南
4. **README.md** - 项目说明文档
5. **CLAUDE.md** - 项目架构文档

---

**验收文档版本**：v1.0
**最后更新**：2025-10-13 18:00
